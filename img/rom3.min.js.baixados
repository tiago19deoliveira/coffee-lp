"use strict";function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,c=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,c=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw c}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}!function(l){var e,i="https://devnull.perfops.net",n="https://rum-cdn.perfops.net/providers",r=3e5,c=3,s="test.resolver.perfops.net",p=3e5,o=2e4,a=6e4,d=3,u=15,f=6e4,h=3,m="desktop",b=Date.now(),g=x(16),t=-1!==function(){}.toString().indexOf("minified")?{logInfo:console.log,logError:console.error}:{logInfo:function(){},logError:function(){}},v=t.logInfo,w=t.logError,y=window.rum?window.rum.key:void 0;function j(e,t,n){m=n,h=Math.min(Math.max(function(e,t){return void 0!==window.rum&&void 0!==window.rum.config&&window.rum.config[t].repeats||e}(e,n),d),u),f=Math.min(Math.max(function(e,t){return void 0!==window.rum&&void 0!==window.rum.config&&window.rum.config[t].interval||e}(t,n),o),a)}function U(e){return Math.max(0,Number(e.toFixed(2)))}function S(n,e){var t=1<arguments.length&&void 0!==e?e:{},r=t.cb,c=void 0===r?function(){}:r,i=t.data,o=t.method,s=void 0===o?"GET":o,p=t.timeout,a=void 0===p?3e3:p,d=t.headers,u=void 0===d?{}:d;return new l(function(e,t){var o=new XMLHttpRequest;o.onload=function(){return e(o)},o.ontimeout=function(){t("timeout")},o.onerror=function(){var e="Unknown error happen when fetching ".concat(n);0!==o.status&&(e="Error happen when fetching ".concat(n,". Status ").concat(o.status,". Response: ").concat(o.statusText)),t(new Error(e))},o.open(s,n),u&&Object.entries(u).forEach(function(e){var t=_slicedToArray(e,2),n=t[0],r=t[1];o.setRequestHeader(n,r)}),o.timeout=a,c(o),o.send(i)})}function x(e){for(var t="abcdefghijklmnopqrstuvwxyz0123456789",n="",r=0;r<e;r++){var o=Math.floor(Math.random()*t.length);n+=t.charAt(o)}return n}function k(e){var t=e.interval?1e3*parseInt(e.interval):f;j(e.repeats?parseInt(e.repeats):h,t,e.mobile?"mobile":"desktop")}function A(){var t=0;setTimeout(function e(){(function(){var r="perfops-rum-clientdns",e=JSON.parse(window.localStorage.getItem(r));if(e&&e.expiry>Date.now())return l.resolve(e.data);for(var o=[],t=0;t<c;t++){var n="https://"+x(16)+"."+s;o.push(S(n))}return new l(function(t,n){l.all(o).then(function(e){var n=[];e.forEach(function(e){var t=JSON.parse(e.response);n.includes(t.resolver)||null===t.resolver||n.push(t.resolver)}),window.localStorage.setItem(r,JSON.stringify({data:n,expiry:Date.now()+p})),t(n)}).catch(function(e){n(e)})})})().then(function(c){(function(){var t="perfops-rum-resources",e=JSON.parse(window.localStorage.getItem(t));return e&&e.expiry>Date.now()?(e.config&&k(e.config),l.resolve(e.data)):S(n,{headers:{"X-Partner-Id":y||"perfops","X-Partner-Hostname":window.location.hostname||"unknown"}}).then(function(e){return JSON.parse(e.response)}).then(function(e){if(!e||!e.data)throw new Error("Empty response.data");return window.localStorage.setItem(t,JSON.stringify({data:e.data,config:e.config,expiry:Date.now()+r})),e.config&&k(e.config),e.data}).catch(function(){return[{id:7,cdnUrl:"https://cpt96125.shopvoxpopulus.com/pics/500b-bench.jpg",p:1},{id:102,cdnUrl:"https://perf.qinglanbaseunicast.com/500b-bench.jpg",p:0},{id:92,cdnUrl:"https://perfops.byte-test.com/500b-bench.jpg",p:1},{id:2,cdnUrl:"https://ovh-cdn.perfops.io/500b-bench.jpg",p:1},{id:72,cdnUrl:"https://rum.perfops.mdb.cdn.orange.com/500b-bench.jpg",p:0},{id:9,cdnUrl:"https://1596384882.rsc.cdn77.org/500b-bench.jpg",p:1},{id:98,cdnUrl:"https://perfops2.byte-test.com/500b-bench.jpg",p:0},{id:117,cdnUrl:"https://eo-perfops1.qcloudteo.com/500b-bench.jpg",p:0},{id:108,cdnUrl:"https://perf-test.sufycdn.com/500b-bench.jpg",p:1},{id:94,cdnUrl:"https://rum.perfops.cdb.cdn.orange.com/500b-bench.jpg",p:0},{id:87,cdnUrl:"https://test-perfops.ldgslb.com/500b-bench.jpg",p:1},{id:4,cdnUrl:"https://perfops-static.freetls.fastly.net/500b-bench.jpg",p:1},{id:74,cdnUrl:"https://test-perfops.haproxy.com/500b-bench.jpg",p:0},{id:101,cdnUrl:"https://eo-static-perfops.qcloudcdn.com/500b-bench.jpg",p:0},{id:15,cdnUrl:"https://cdnperf-rum.cdnetworks.net/500b-bench.jpg",p:1},{id:20,cdnUrl:"https://cdnperf.cachefly.net/500b-bench.jpg",p:1},{id:109,cdnUrl:"https://cdn23602612.ahacdn.me/500b-bench.jpg",p:1},{id:118,cdnUrl:"https://eo-perfops2.qcloudteo.com/500b-bench.jpg",p:0},{id:8,cdnUrl:"https://perfops.gcorelabs.com/500b-bench.jpg",p:1},{id:105,cdnUrl:"https://akamai-cdn.perfops.io/500b-bench.jpg",p:0},{id:75,cdnUrl:"https://cdnperf-rum.quantil.com/500b-bench.jpg",p:0},{id:12,cdnUrl:"https://cdn.jsdelivr.net/gh/jimaek/js-test@1.1/500b-bench.jpg",p:1},{id:83,cdnUrl:"https://medianova-cdnperf.mncdn.com/500b-bench.jpg",p:1},{id:11,cdnUrl:"https://perfops1.b-cdn.net/500b-bunny-bench.jpg",p:1},{id:110,cdnUrl:"https://test-perfops.wedos.delivery/500b-bench.jpg",p:0},{id:120,cdnUrl:"https://eo-perfops4.qcloudteo.com/500b-bench.jpg",p:0},{id:106,cdnUrl:"https://djlzvy5xcvhxt.cloudfront.net/500b-bench.jpg",p:1},{id:97,cdnUrl:"https://medianova-cdnvperf.mncdn.com/500b-bench.jpg",p:0},{id:104,cdnUrl:"https://25748s.ha.azioncdn.net/500b-bench.jpg",p:0},{id:114,cdnUrl:"https://perfopsrum-eip.akamaized.net/500b-bench.jpg",p:0},{id:99,cdnUrl:"https://test-perfops.idevops.suijinetworks.com/500b-bench.jpg",p:1},{id:35,cdnUrl:"https://test-perfops.blazingcdn.com/500b-bench.jpg",p:1},{id:113,cdnUrl:"https://perfops.test.edgekey.net/500b-bench.jpg",p:0},{id:85,cdnUrl:"https://proxy.canary.scrubbingcenter.com/test_image.png",p:0},{id:119,cdnUrl:"https://eo-perfops3.qcloudteo.com/500b-bench.jpg",p:0},{id:84,cdnUrl:"https://ultrawaf.canary.scrubbingcenter.com/test_image.png",p:0},{id:5,cdnUrl:"https://d3888oxgux3fey.cloudfront.net/500b-bench.jpg",p:1},{id:3,cdnUrl:"https://perfops.cloudflareperf.com/500b-cf-bench.jpg",p:1},{id:10,cdnUrl:"https://perfopsrum.akamaized.net/500b-bench.jpg",p:1},{id:40,cdnUrl:"https://perfops.swiftycdn.net/500b-sw-bench.jpg",p:0}]})})().then(function(e){var t={ua:navigator.userAgent,hostname:window.location.hostname,client:y,clientdns:c,platform:m,timeElapsed:0,sessionId:"",version:5},n=[];performance.clearResourceTimings();function r(){var e=n.splice(0,n.length);return function(e){var t=0,n=0;return e.forEach(function(e){e.up?2e3<e.time&&t++:n++}),n+t<e.length}(e)?function(e,t){return e.timeElapsed=Math.round((Date.now()-b)/1e3),e.sessionId=g,S("".concat(i,"/rum/v1"),{data:JSON.stringify({metadata:e,data:t}),method:"POST"}).catch(w)}(t,e):e}function o(e){return!(e.time<3||3e3<e.time)&&(2<=n.push(e)?r():void 0)}return function(e,r){return e.reduce(function(e,n){return e.then(function(t){return r(n).then(function(e){return t.push(e),t})})},l.resolve([]))}(e,function(e){return function(e){var c="".concat(e.cdnUrl,"?t=").concat(Date.now()),t=new URL(c).hostname,i={id:e.id,domain:t,online:navigator&&void 0!==navigator.onLine?Number(navigator.onLine):-1};return S(c).then(function(e){var t=performance.getEntriesByName(c)[0],n=U(t.domainLookupEnd-t.domainLookupStart),r=U(t.connectEnd-t.connectStart),o=0<r?U(t.connectEnd-t.secureConnectionStart):0;return 200<=e.status&&e.status<300&&(i=Object.assign({},i,{up:1,status:e.status,time:Number((t.responseEnd-t.requestStart).toFixed(2)),dnsLookupTime:n,tcpTime:r,sslTime:o,headers:e.getAllResponseHeaders(),httpVersion:t.nextHopProtocol})),300<=e.status&&e.status<=500&&(i=Object.assign({},i,{up:0,status:e.status,dnsLookupTime:n,tcpTime:r,sslTime:o,headers:e.getAllResponseHeaders(),httpVersion:t.nextHopProtocol})),i}).catch(function(){return Object.assign({},i,{up:0,status:0})})}(e).then(o)}).then(r)}).then(v,w).then(function(){(t+=1)<h&&setTimeout(e,f)})})},3e3)}j(f,h,"desktop"),e=function(){var e=["bot","headless","google","baidu","bing","msn","duckduckbot","teoma","slurp","yandex","phantomjs","pingdom","ahrefsbot"].join("|");if(new RegExp(e,"i").test(window.navigator.userAgent))console.warn("PerfOps RUM not launching due to suspicious userAgent:",window.navigator.userAgent);else if(void 0!==window.performance){if(performance.onresourcetimingbufferfull=function(){v("clear performance resource buffer"),performance.clearResourceTimings()},"function"==typeof l)return A();!function(e,t){var n=document.createElement("script"),r=!1;n.onreadystatechange=n.onload=function(){r||t(),r=!0},n.setAttribute("src",e),document.body.appendChild(n)}("https://cdn.perfops.net/npm/es6-promise-4.2.4/dist/es6-promise.min.js",function(){l=window.ES6Promise,A()})}},"complete"===document.readyState?e():window.addEventListener("load",e)}(window.Promise);